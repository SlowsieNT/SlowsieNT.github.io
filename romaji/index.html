<!DOCTYPE html>
<html lang="en">
<head>
	<!-- CLEAN CODE = BAD OPTIMIZATION ~90% of the time -->
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width">
	<title>JaLLiK Memory Game | Ja111K</title>
	<meta name="description" content="Learn 11k of Japanese most used words, or overkill of 111K+ Japanese words.">
	<meta name="keywords" content="Ja111K Game, JaLLik Game, JaLLik Memory Game, Ja111K Memory Game, Game, Memory, JaLLiK, Ja111K, Japanese Game, Japanese Memory Game">
<style>
	html {width:100%;height:100%;}
	body {background-color: #111;color:gray;margin:0;padding:8px;}
	.w32 {width:32px;} .w48 {width:48px;} .w64 {width:64px;}
	.w240 {width:240px;} .w300 {width:300px;} .w320 {width:320px;} .w360 {width:360px;}
	.w480 {width:480px;} .w640 {width:640px;} .w720 {width:720px;}
	.mw2{margin-left:2px;}.mw4 {margin-left:4px;}.mw6{margin-left:6px;}
	.mw8 {margin-left: 8px;}.mw10 {margin-left: 10px;}.mw12 {margin-left: 12px;}
	.mw14 {margin-left: 14px;}.mw16 {margin-left: 16px;}.mw18 {margin-left: 18px;}
	.mn2 {margin-top:2px;}.mn4{margin-top:4px;}.mn6{margin-top:6px;}
	.mn8 {margin-top:8px;}.mn10{margin-top:10px;}.mn12{margin-top:12px;}
	.mns8{margin-top:8px;margin-bottom:8px;}
	.dib {display:inline-block;*display:inline;*zoom:1;}
	.p8{padding:8px;}
	.es01, .bs01 {
		padding:2px 4px;
		border:1px #444 solid;
		background-color: #222;
		color:lime;outline:none;
	}
	ol {margin:0;padding:0;}
	.fg-lime {color:lime;} .fg-lg{color:lightgreen;}
	.bs01:hover {background-color: #444;}
	.hline {width:55%;border-top:1px silver solid;margin-top:4px;margin-bottom:4px;}
	fieldset {
		border:1px #222 solid;margin-top:4px;margin-bottom:4px;
		*width: 360px;
		min-width: 300px;
		max-width: 400px;
	}
	fieldset legend { color: silver; }
	#liAnswers .bs01 {padding:8px 16px;}
	.fwb {font-weight: bold;}
	.h2 {font-size:24px;}
</style>
</head>
<body>
	<!-- Putting dictionary here so page goes dark mode faster? -->
	<script src="jaBasicDict.js"></script>
	<script src="jaFrequentDict.js"></script>
	<!-- Using old school design -->
	<fieldset>
		<legend><b><script>document.write(document.title);</script></b></legend>
		<div class="mw4">
			<i>You may download this page for offline use.</i>
		</div>
	</fieldset>
	<div>
		<fieldset>
			<legend>Options</legend>
			<table>
				<tr>
					<td>
						<div>
							<label><input type="radio" name="rbDictmode" value="Mode1" checked> Most used words</label>
						</div>
						<div>
							<label><input type="radio" name="rbDictmode" value="ModeX"> Overkill (111k+)</label>
						</div>
					</td>
					<td>
						<div class="mw16">
							<b id="lbWordsCount" class="mw2">N/A</b> words.
						</div>
					</td>
				</tr>
			</table>
			<table class="mw4">
				<tr>
					<td>
						<span>Words per page</span>
						<div class="mn4"><input id="tbWordsPerPage" class="w48 es01" type="number" value="125" min="50"></div>
					</td>
					<td>
						<div class="mw16">
							<span>Answers per word</span>
							<div class="mn4"><input id="tbAnsPerWord" class="w32 es01" type="number" value="4" min="4" max="50"></div>
						</div>
					</td>
				</tr>
				<tr>
					<td>
						<button id="btnPrev1" class="bs01">&lt; Back</button>
						<button id="btnNext1" class="bs01 mw4">Next &gt;</button>
					</td>
					<td>
						<div class="mw16 mn2">
							<span>Page:</span>
							<input id="tbCurrentPage" class="w48 es01" type="number" value="1">
							/&nbsp;<b id="lbTotalPages">1</b>
						</div>
					</td>
				</tr>
			</table>
		</fieldset>
		<div>
			<fieldset>
				<legend>Score</legend>
				<table class="mw4">
					<tr>
						<td>
							<span><b>Correct</b></span>
							<div><b id="lbCorrect1" class="fg-lime">0</b></div>
						</td>
						<td>
							<div class="mw16">
								<span><b>Learning</b></span>
								<div><b id="lbLearning1">0</b></div>
							</div>
						</td>
					</tr>
				</table>
			</fieldset>
		</div>
		<div class="mw2">
			<div>
				<span style="font-size:22px">What is the meaning of:</span>
				<div>
					<div class="dib">
						<b id="lbQWord" class="fg-lg" style="font-size:22px">N/A</b>,
					</div>
					<div class="dib">
						<b id="lbQWordXji" class="fg-lg" style="font-size:22px">N/A</b>
					</div>
				</div>
			</div>
			<div id="liAnswers"></div>
		</div>
		<fieldset>
			<legend>Tip(s)</legend>
			<!-- wanted to use <ol> but ie6 said "nope" -->
			<div><span><span class="fg-lime">-</span> You can pause to read answer by clicking answer again.</span></div>
			<div><span><span class="fg-lime">-</span> You can pause blinking of license text by clicking it.</span></div>
			<div><span><span class="fg-lime">-</span> You can run this app on Internet Explorer 6.</span></div>
		</fieldset>
		<script>
/* Time to tremble in fear, modern devs!
 * Behold the IE6 compatible code!
 */
// easify
for (var n in jaBasicDict) jaBasicDict[n] = [n].concat(jaBasicDict[n]);
for (var n in jaFrequentDict) jaFrequentDict[n] = [n].concat(jaFrequentDict[n]);
// etc
var Game = {
	Dict: {
		CurrentDataType: 1, /*CurrentDataType[0 array, 1 obj]*/
		Current: null,
		Mode: {
			// don't change array manually unless it's at index 1
			"ModeX": [0, jaBasicDict, {}],
			"Mode1": [0, jaFrequentDict, {}]
		},
		ResolveAll: function (aMode) {
			var _ = this;
			if (void 0 === aMode) for (var cdict = "Hard", i = 0, rbA = Game.UI.RbArrDictMode, rLen = rbA.length; i < rLen; i++) {
				var rBtn = rbA[i];
				if (rBtn.checked) cdict = rBtn.value;
			}
			// allocate lengths:
			for (var mode in _.Mode)
				for (var kWord in _.Mode[mode][1]) {
					++_.Mode[mode][0];
					// real shet:
					_.Mode[mode][2][_.Mode[mode][1][kWord][1]] = _.Mode[mode][1][kWord];
				}
			// default mode:
			_.Current = _.Mode[cdict] || _.Mode[aMode];
		}
	},
	Settings: {
		AnswerDelay: 1.5e3,
		AnswersPerWord: 4
	},
	Stats: {
		Correct: 0,
		Learning: 0,
		WordsDone: [],
		Wordlist: [],
		_: 0
	},
	Utils: {
		ShuffleArray: function (aArray) {
			var aLen = aArray.length;
			while (0 !== aLen) {
				// Pick a remaining element then Swap
				var iRand = 0|aLen*Math.random(),
					temp = aArray[--aLen];
				aArray[aLen] = aArray[iRand];
				aArray[iRand] = temp;
			}
			return aArray;
		}
	},
	UI: {
		// UI Handles:
		// yea, those id calls are unnecessary, but it is what it is
		LbWordsCount: id("lbWordsCount"),
		TbWordsPerPage: id("tbWordsPerPage"),
		TbAnsPerWord: id("tbAnsPerWord"),
		LiAnswers: id("liAnswers"),
		BtnPrev1: id("btnPrev1"),
		BtnNext1: id("btnNext1"),
		LbQWord: id("lbQWord"),
		LbQWordXji: id("lbQWordXji"),
		LbCorrect1: id("lbCorrect1"),
		LbLearning: id("lbLearning1"),
		TbCurrentPage: id("tbCurrentPage"),
		LbTotalPages: id("lbTotalPages"),
		RbArrDictMode: document.getElementsByName("rbDictmode"),
		// Functions:
		CreateAnswer: function (aButton1HTML, aMarginTop) {
			var holder = ce("div");
			holder.style.marginTop = aMarginTop + "px";
			holder.innerHTML = '<button class="bs01 p8"></button>';
			var btn = holder.getElementsByTagName("button")[0];
			btn.innerHTML = aButton1HTML;
			return {
				Button: btn,
				Handle: holder
			};
		},
		RenderAnswers: function (aAnswerArr, aCorrectAnswer) {
			var _ = this, elements = [],
				screenW = document.body.offsetWidth;
			_.LiAnswers.innerHTML = "";
			if ("undefined" !== typeof console)
				console.log("Correct:", aCorrectAnswer[1]);
			// etc
			for (var i in aAnswerArr) {
				// oItem[0 word, 1 words[0 xji, 1 romaji, 2 word-type, 3 translation]]
				if (!(i >= 0)) continue;
				var oItem = aAnswerArr[i][1][1],
					hAns = _.CreateAnswer(aAnswerArr[i][1][3], (i > 0 ? 4 : 16)),
					hTmr,
					zzz = 2;
				function timerHide() {
					clearTimeout(hTmr);
					hTmr = setTimeout(Game.UI.RenderRand, Game.Settings.AnswerDelay);
				}
				hAns.IsAnswer = aCorrectAnswer[1][1] === oItem;
				//console.log(hAns, hAns.IsAnswer, aCorrectAnswer[1][1], oItem)
				hAns.Handle.HData = hAns;
				hAns.Handle.onclick = function () {
					var tElem = this;
					if (tElem.gameClicked) {
						timerHide();
					} else {
						tElem.gameClicked = 1;
						_.OnAnswer(tElem, elements, aCorrectAnswer);
						timerHide();
					}
				};
				elements.push(hAns);
				_.LiAnswers.appendChild(hAns.Handle);
				if (screenW > 440) hAns.Button.style.width = "420px";
				else if (screenW > 380) hAns.Button.style.width = "360px";
				else hAns.Button.style.width = "320px";
			}
		},
		OnAnswer: function (aAnswerHandle, aAnswerHandles, aCorrectAnswer) {
			// aAnswerHandles[] {Button, Handle}
			for (var i in aAnswerHandles)
				if (!aAnswerHandles[i].IsAnswer)
					aAnswerHandles[i].Handle.style.display = "none";
			// aCorrectAnswer[0 word, 1 words[0 xji, 1 romaji, 2 word-type, 3 translation]]
			var ansH = aAnswerHandle.HData, flag1 = ansH.IsAnswer;
			Game.Stats.Correct += flag1;
			Game.Stats.Learning += !flag1;
			// ui
			Game.UI.Update(2);
			// etc
			ansH.Button.innerHTML = (
				aCorrectAnswer[1][2] + "<br>" + aCorrectAnswer[1][3]
			);
			Game.Stats.WordsDone.push(aCorrectAnswer[1][1]);
			// render random word
		},
		Update: function (aType) {
			// Reset/update stats and ui
			if (2 === aType) {
				Game.UI.LbCorrect1.innerHTML = Game.Stats.Correct;
				Game.UI.LbLearning.innerHTML = Game.Stats.Learning;
			}
			if (1 === aType) {
				Game.UI.LbCorrect1.innerHTML = Game.Stats.Correct = 0;
				Game.UI.LbLearning.innerHTML = Game.Stats.Learning = 0;
			}
		},
		RenderRand: function () {
			var arrWords = Game.Stats.Wordlist,
				arrWordsLen = 0,
				tmpArr = [], wd = Game.Stats.WordsDone, wLen = wd.length;
			// Remove answer words that were.
			for (var i2 in arrWords) {
				var canAdd = 1;
				for (var i = 0; i < wLen; i++)
					if (arrWords[i2][1][1] == wd[i]) {
						canAdd = 0;
						break;
					}
				if (canAdd)
					tmpArr.push(arrWords[i2]);
			}
			arrWords = tmpArr, arrWordsLen = arrWords.length;
			// etc
			var items = [],
				correctAnswerIdx = 0|Math.random()*arrWordsLen,
				correctAnswer = arrWords[correctAnswerIdx],
				answers = [correctAnswer];
			Game.UI.LbQWord.innerHTML = correctAnswer[1][1];
			Game.UI.LbQWordXji.innerHTML = correctAnswer[0]+"";
			// Allocate decoy items
			for (var i = 0; i < arrWordsLen; i++)
				if (arrWords[i][1][1] != correctAnswer[1][1])
					items.push(arrWords[i]);
			// First shuffle array without correct answer
			Game.Utils.ShuffleArray(items);
			// Then push random answers
			for (var i = 1; i < Game.Settings.AnswersPerWord; i++)
				if (items[i]) answers.push(items[i]);
			// Now shuffle the answers array
			Game.Utils.ShuffleArray(answers);
			// Finally render them
			Game.UI.RenderAnswers(answers, correctAnswer);
		},
		ResolveMainHandles: function (aMode) {
			Game.Dict.ResolveAll(aMode);
			Game.UI.Pag1 = Paginate({
				iPageNum: +Game.UI.TbCurrentPage.value,
				iPerPage: +Game.UI.TbWordsPerPage.value,
				// Data[0: DataType(0=Array, 1=Object), 1: ArrayOrObject]
				Data: [
					Game.Dict.CurrentDataType, Game.Dict.Current[1] // OR: [ 1, {a:1,b:2,c:3,d:4,e:5} ]
				],
				// Auto disable Next/Back button?
				AutoDisable: true,
				// Properties are Element, or Array-like:
				Back: Game.UI.BtnPrev1,
				Next: Game.UI.BtnNext1,
				PerPage: [Game.UI.TbWordsPerPage],
				CurPage: [Game.UI.TbCurrentPage],
				PageCount: Game.UI.LbTotalPages,
				// Update usually called after any change
				Update: function (aPageItems, aPageItemsLen, aPerPage, aPageNum, aPageCount, aArrayLen) {
					// Write code here to render page items
					Game.UI.TbCurrentPage.value = aPageNum;
					Game.UI.LbWordsCount.innerHTML = aArrayLen.toLocaleString();
					//Game.UI.LbTotalPages.innerHTML = aPageCount;
					Game.Stats.Wordlist = aPageItems;
					Game.UI.Update(1);
					Game.UI.RenderRand();
				}
			});
		},
		ResolveHandlers: function () {
			this.ResolveMainHandles();
			var ois = null === document.body.oninput;
			Game.UI.TbAnsPerWord[ois?"oninput":"onkeyup"] = function () {
				Game.Settings.AnswersPerWord = 0|this.value;
				var apw = Game.Settings.AnswersPerWord;
				if (apw > 50)
					Game.Settings.AnswersPerWord = 50;
				if (apw < 4)
					Game.Settings.AnswersPerWord = 4;
				this.value = Game.Settings.AnswersPerWord;
			};
			for (var i = 0, rbLen = Game.UI.RbArrDictMode.length; i < rbLen; i++) {
				var rbtn = Game.UI.RbArrDictMode[i];
				rbtn.onclick = function () {
					if (this.checked) {
						Game.UI.ResolveMainHandles(this.value);
					}
				};
			}
		}
	}
};
/* This is free and unencumbered software released into the public domain.
 * License: Unlicense
 * For more information, please refer to <http://unlicense.org/>
 */
 function Paginate(aConf) {
	var p = arguments.callee, c = aConf, z;
	if (void 0 === p.ois)
		z = document.createElement("a"),
		p.ois = !z.oninput,
		p.ae = !!z.attachEvent,
		p.aes = !!z.addEventListener;
	// etc
	var Data = c[0] || c.Data || c.data,
		Back = c[1] || c.Back || c.back,
		Next = c[2] || c.Next || c.next,
		PerPage = c[3] || c.PerPage || c.perPage,
		CurPage = c[4] || c.CurPage || c.curPage,
		PageCount = c[5] || c.PageCount || c.pageCount,
		PageItemsCount = c[6] || c.PageItemsCount || c.pageItemsCount,
		ItemsCount = c[7] || c.ItemsCount || c.itemsCount,
		AutoDisable = c[8] || c.AutoDisable || c.autoDisable,
		UpdateFn = c[9] || c.Update || c.update,
		iPageNum = 0 | (c[10] || c.iPageNum),
		iPerPage = 0 | (c[11] || c.iPerPage),
		iPageCount = 1,
		inputEvt = p.ois ? "input" : "keyup",
		memArray, tmpArray, ArrayLen = 0,
		valueAttr = { INPUT: 1, TEXTAREA: 1, SELECT: 1 };
	function HandleUICA(aElemArr, aValue, aAttr) {
		if (aElemArr && void 0 === aElemArr.length && aElemArr.tagName)
			aElemArr = [aElemArr];
		if (!aElemArr) return;
		for (var i = 0, arrLen = aElemArr.length; i < arrLen; i++) {
			var t = aElemArr[i], etn = t && t.tagName;
			if (!t) continue;
			if (void 0 !== aAttr) {
				if ("disabled" === aAttr)
					if (aValue) t.setAttribute(aAttr, "");
					else t.removeAttribute(aAttr);
				else t.setAttribute(aAttr, aValue);
			}
			else if (etn in valueAttr)
				t.value = aValue;
			else t.innerHTML = aValue;
		}
	}
	function UpdateUI(aPageItems, aPageItemsLen, aPerPage, aPageNum, aPageCount, aArrayLen) {
		UpdateFn.apply(this, arguments);
		HandleUICA(PerPage, aPerPage);
		HandleUICA(CurPage, aPageNum);
		HandleUICA(PageCount, aPageCount);
		HandleUICA(PageItemsCount, aPageItemsLen);
		HandleUICA(ItemsCount, aArrayLen);
		if (AutoDisable)
			HandleUICA(Back, 1 === aPageNum, "disabled"),
			HandleUICA(Next, iPageCount === aPageNum, "disabled");
	}
	// Handle events
	function AddHandler(aElemArr, aEventName, aFunc) {
		if (aElemArr && void 0 === aElemArr.length && aElemArr.tagName)
			aElemArr = [aElemArr];
		if (!aElemArr) return;
		for (var i = 0, arrLen = aElemArr.length; i < arrLen; i++) {
			var elem = aElemArr[i], etn = elem && elem.tagName;
			if (!elem) continue;
			if (!aEventName) {
				if ("INPUT" === etn || "TEXTAREA" === etn)
					aEventName = inputEvt;
				else aEventName = "change";
			}
			if (!aEventName) return;
			if (p.aes) elem.addEventListener(aEventName, aFunc);
			else {
				function eH(e) { aFunc && aFunc.call(elem, e||event, elem); }
				if (p.ae) elem.attachEvent("on" + aEventName, eH);
				else elem["on" + aEventName] = eH;
			}
		}
	}
	// Handle per page items and events
	AddHandler(PerPage, "", function (e) { rH.PerPage(this.value); });
	// Handle current page number and events
	AddHandler(CurPage, "", function (e) { rH.PageNum(this.value); });
	// Handle page num change
	AddHandler(PageCount, "", function (e) { rH.PerPage(Math.ceil(ArrayLen/+this.value)); });
	// Handle button events
	AddHandler(Back, "click", function (e) { rH.Back(); });
	AddHandler(Next, "click", function (e) { rH.Next(); });
	// Now create main handle
	var rH = {};
	function ResolveData(aDataConf, aPageNum, aPerPage) {
		// aDataConf[0: DataType(0=Array, 1=Object), 1: ArrayOrObject]
		if (aDataConf[0]) {
			tmpArray = [];
			for (var n in aDataConf[1])
				tmpArray.push([n, aDataConf[1][n]]);
			memArray = tmpArray;
		} else memArray = aDataConf[1];
		ArrayLen = memArray.length;
		iPageNum = aPageNum ? ResolvePageNum(0 | aPageNum) : iPageNum;
		iPerPage = aPerPage ? Math.abs(0 | aPerPage) : iPerPage;
		if (1 > iPerPage) iPerPage = 1;
		iPageCount = Math.ceil(ArrayLen / iPerPage);
		rH.Update();
	}
	function ResolvePageNum(aPageNum, aCallUpdate) {
		if (1 > iPageNum) iPageNum = 1;
		else if (iPageNum > iPageCount) iPageNum = iPageCount;
		var flag1 = aPageNum > 0 && aPageNum <= iPageCount;
		if (aPageNum != iPageNum && flag1)
			iPageNum = aPageNum;
		if (flag1 && aCallUpdate)
			rH.Update();
		return 0 | iPageNum;
	}
	// etc
	rH[0] = rH.PageNum = rH.pageNum = rH.Page = rH.page = function (aPageNum) {
		return ResolvePageNum(aPageNum, 1);
	};
	rH[1] = rH.PageCount = rH.pageCount = function () { return iPageCount; };
	rH[2] = rH.PerPage = rH.perPage = rH.per = function (aPerPage) {
		var nPP = Math.abs(0 | aPerPage);
		if (nPP < 1) nPP = 1;
		if (nPP !== iPerPage && nPP >= 1)
			rH.Update(1, iPerPage = nPP);
		return iPerPage;
	};
	rH[3] = rH.Data = rH.data = rH.Items = rH.items = ResolveData;
	rH[4] = rH.Next = rH.next = rH.Forward = rH.forward = function () { return rH.PageNum(++iPageNum); };
	rH[5] = rH.Prev = rH.Prev = rH.Back = rH.back = function () { return rH.PageNum(--iPageNum); };
	rH[6] = rH.Update = function (aCallType) {
		// Call upper Update
		if (UpdateUI) {
			if (aCallType)
				iPageNum = 1;
			iPageNum |= 0;
			var sIdx = (-1 + iPageNum) * iPerPage,
				tArray = memArray.slice(sIdx, iPerPage + sIdx);
			iPageCount = Math.ceil(ArrayLen / iPerPage);
			UpdateUI(tArray, tArray.length, iPerPage, iPageNum, iPageCount, ArrayLen);
		}
	};
	ResolveData(Data, iPageNum, iPerPage);
	return rH;
}

function id(id) {return document.getElementById(id);}
function ce(n) {return document.createElement(n);}

Game.UI.ResolveHandlers();
		</script>
		<!-- footer -->
		<div class="mw4">
			<div style="margin-top:32px"><i id="flicker722617809971422">No Rights reserved.</i></div>
			<div><i>Source Code License: <u>Unlicense</u>.</i></div>
			<script>
				(function(eBlink){
					var i = 0, pauseBlink;
					eBlink.onclick = function () { pauseBlink = !pauseBlink; };
					(function loop() {
						if (!pauseBlink) {
							eBlink.style.textDecoration = i++ & 1 ? "underline" : "none";
							eBlink.style.color = i & 1 ? "" : "lime";
						}
						setTimeout(loop, 1e3);
					})();
				})(document.getElementById("flicker722617809971422"));
			</script>
		</div>
	</div>
</body>
</html>
